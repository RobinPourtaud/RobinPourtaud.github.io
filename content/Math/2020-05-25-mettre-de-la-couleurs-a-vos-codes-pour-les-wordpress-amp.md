---
title: Coloration Syntaxique pour WordPress AMP
author: Robin Pourtaud
type: post
date: 2020-05-25T10:00:00+00:00
url: /sciences/informatique/robin/2200/
featured_image: /wp-content/uploads/2020/05/close-up-of-computer-keyboard-248515-1568x784.jpg
itemlist_item_1877:
  - 'a:0:{}'
music_composer_1877:
  - 'a:0:{}'
movie_actor_1877:
  - 'a:0:{}'
article_items_1877:
  - 'a:0:{}'
image_object_exif_data_1877:
  - 'a:0:{}'
blogposting_items_1877:
  - 'a:0:{}'
newsarticle_items_1877:
  - 'a:0:{}'
tech_article_items_1877:
  - 'a:0:{}'
product_reviews_1877:
  - 'a:0:{}'
feed_element_1877:
  - 'a:0:{}'
faq_question_1877:
  - 'a:0:{}'
performer_1877:
  - 'a:0:{}'
accepted_answer_1877:
  - 'a:0:{}'
suggested_answer_1877:
  - 'a:0:{}'
howto_supply_1877:
  - 'a:0:{}'
howto_tool_1877:
  - 'a:0:{}'
howto_step_1877:
  - 'a:0:{}'
announcement_location_1877:
  - 'a:0:{}'
music_playlist_track_1877:
  - 'a:0:{}'
music_album_track_1877:
  - 'a:0:{}'
apartment_amenities_1877:
  - 'a:0:{}'
additional_property_1877:
  - 'a:0:{}'
mc_cause_1877:
  - 'a:0:{}'
mc_symptom_1877:
  - 'a:0:{}'
mc_risk_factor_1877:
  - 'a:0:{}'
tvseries_actor_1877:
  - 'a:0:{}'
tvseries_season_1877:
  - 'a:0:{}'
trip_itinerary_1877:
  - 'a:0:{}'
itemlist_item_1494:
  - 'a:0:{}'
music_composer_1494:
  - 'a:0:{}'
movie_actor_1494:
  - 'a:0:{}'
article_items_1494:
  - 'a:0:{}'
image_object_exif_data_1494:
  - 'a:0:{}'
blogposting_items_1494:
  - 'a:0:{}'
newsarticle_items_1494:
  - 'a:0:{}'
tech_article_items_1494:
  - 'a:0:{}'
product_reviews_1494:
  - 'a:0:{}'
feed_element_1494:
  - 'a:0:{}'
faq_question_1494:
  - 'a:0:{}'
performer_1494:
  - 'a:0:{}'
accepted_answer_1494:
  - 'a:0:{}'
suggested_answer_1494:
  - 'a:0:{}'
howto_supply_1494:
  - 'a:0:{}'
howto_tool_1494:
  - 'a:0:{}'
howto_step_1494:
  - 'a:0:{}'
announcement_location_1494:
  - 'a:0:{}'
music_playlist_track_1494:
  - 'a:0:{}'
music_album_track_1494:
  - 'a:0:{}'
apartment_amenities_1494:
  - 'a:0:{}'
additional_property_1494:
  - 'a:0:{}'
mc_cause_1494:
  - 'a:0:{}'
mc_symptom_1494:
  - 'a:0:{}'
mc_risk_factor_1494:
  - 'a:0:{}'
tvseries_actor_1494:
  - 'a:0:{}'
tvseries_season_1494:
  - 'a:0:{}'
trip_itinerary_1494:
  - 'a:0:{}'
itemlist_item_1493:
  - 'a:0:{}'
music_composer_1493:
  - 'a:0:{}'
movie_actor_1493:
  - 'a:0:{}'
article_items_1493:
  - 'a:0:{}'
image_object_exif_data_1493:
  - 'a:0:{}'
blogposting_items_1493:
  - 'a:0:{}'
newsarticle_items_1493:
  - 'a:0:{}'
tech_article_items_1493:
  - 'a:0:{}'
product_reviews_1493:
  - 'a:0:{}'
feed_element_1493:
  - 'a:0:{}'
faq_question_1493:
  - 'a:0:{}'
performer_1493:
  - 'a:0:{}'
accepted_answer_1493:
  - 'a:0:{}'
suggested_answer_1493:
  - 'a:0:{}'
howto_supply_1493:
  - 'a:0:{}'
howto_tool_1493:
  - 'a:0:{}'
howto_step_1493:
  - 'a:0:{}'
announcement_location_1493:
  - 'a:0:{}'
music_playlist_track_1493:
  - 'a:0:{}'
music_album_track_1493:
  - 'a:0:{}'
apartment_amenities_1493:
  - 'a:0:{}'
additional_property_1493:
  - 'a:0:{}'
mc_cause_1493:
  - 'a:0:{}'
mc_symptom_1493:
  - 'a:0:{}'
mc_risk_factor_1493:
  - 'a:0:{}'
tvseries_actor_1493:
  - 'a:0:{}'
tvseries_season_1493:
  - 'a:0:{}'
trip_itinerary_1493:
  - 'a:0:{}'
rank_math_internal_links_processed:
  - "1"
ampforwp-amp-on-off:
  - default
rank_math_seo_score:
  - "75"
rank_math_primary_category:
  - "8"
rank_math_focus_keyword:
  - AMP
rank_math_analytic_object_id:
  - "65"
categories:
  - Informatique
tags:
  - AMP
  - CSS
  - Tutoriel
  - Wordpress

---
AMP est une technologie d√©velopp√©e par Google depuis 2015. Open Source, c&rsquo;est une m√©thode de cr√©ation de page Web statique permettant un rendu plus rapide. Applicable sur WordPress, elle peut permettre des **gains importants**, de part son utilisation de cache et sa **d√©sactivation par d√©faut de code personnalis√© JavaScript**. Cette d√©sactivation est, en terme de vitesse, b√©n√©fique. Elle pose malgr√© tout de nombreux probl√®mes. Un probl√®me parmi ceux-ci est celui de la **coloration syntaxique**.

Il existe de nombreuses extensions WordPress permettant la coloration syntaxique. Cependant, la (tr√®s grande) majorit√© d&rsquo;entre elles utilise le JavaScript&#8230; Ce tutoriel est l√† pour vous aider √† r√©tablir vos magnifiques codes sur votre site WordPress AMP üôÇ . 

## N√©cessaire 

  * Avoir acc√®s aux droits d&rsquo;administration de votre WordPress mis √† jour (mai 2020).
  * Avoir **de pr√©f√©rence** install√© [ce plugin pour AMP][1]{.rank-math-link}.
  * Savoir installer une extension. Sinon : [Support][2]{.rank-math-link}

## Installer l‚Äôextension : Syntax-highlighting Code Block {.has-text-align-left}

Je vous propose d&rsquo;installer l&rsquo;extension :

<p class="has-text-align-center">
  <a href="https://wordpress.org/plugins/syntax-highlighting-code-block/" class="rank-math-link">Syntax-highlighting Code Block (with Server-side Rendering)</a>
</p>

Contrairement √† de nombreuses extensions de coloration syntaxique, celle-ci ne repose pas sur le JavaScript mais sur le PHP. Ainsi il n&rsquo;y aura plus besoin de fichiers JS personnalis√©s, qui posent probl√®me avec la technologie AMP. 

## Trouvez un th√®me qui vous convient 

Il existe de nombreux th√®mes compatibles Highlight.js. Vous pouvez tous les tester √† l&rsquo;adresse : 

<p class="has-text-align-center">
  <a href="https://highlightjs.org/static/demo/">https://highlightjs.org/static/demo/</a>
</p>

Une fois votre th√®me favori trouv√©, rendez-vous sur Github √† l&rsquo;adresse suivante : 

<p class="has-text-align-center">
  <a href="https://github.com/highlightjs/highlight.js/tree/master/src/styles">https://github.com/highlightjs/highlight.js/tree/master/src/styles</a>
</p>

et copiez le contenu du fichier CSS choisi. 

Mon pr√©f√©r√© √©tant celui-ci : 

<pre class="wp-block-code" aria-describedby="shcb-language-77" data-shcb-language-name="CSS" data-shcb-language-slug="css"><div>
  <code class="hljs language-css">&lt;span class="hljs-comment">/*
  Monokai style - ported by Luigi Maselli - http://grigio.org
  */&lt;/span>
  
  &lt;span class="hljs-selector-class">.hljs&lt;/span> {
    &lt;span class="hljs-attribute">display&lt;/span>: block;
    &lt;span class="hljs-attribute">overflow-x&lt;/span>: auto;
    &lt;span class="hljs-attribute">padding&lt;/span>: &lt;span class="hljs-number">0.5em&lt;/span>;
    &lt;span class="hljs-attribute">background&lt;/span>: &lt;span class="hljs-number">#272822&lt;/span>;
    &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#ddd&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-tag&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-keyword&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-selector-tag&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-literal&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-strong&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-name&lt;/span> {
    &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#f92672&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-code&lt;/span> {
    &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#66d9ef&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-class&lt;/span> &lt;span class="hljs-selector-class">.hljs-title&lt;/span> {
    &lt;span class="hljs-attribute">color&lt;/span>: white;
  }
  
  &lt;span class="hljs-selector-class">.hljs-attribute&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-symbol&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-regexp&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-link&lt;/span> {
    &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#bf79db&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-number&lt;/span>{
      &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#ae81ff&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-string&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-bullet&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-subst&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-title&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-section&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-emphasis&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-type&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-built_in&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-builtin-name&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-selector-attr&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-selector-pseudo&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-addition&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-variable&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-template-tag&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-template-variable&lt;/span> {
    &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#a6e22e&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-comment&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-quote&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-deletion&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-meta&lt;/span> {
    &lt;span class="hljs-attribute">color&lt;/span>: &lt;span class="hljs-number">#75715e&lt;/span>;
  }
  
  &lt;span class="hljs-selector-class">.hljs-keyword&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-selector-tag&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-literal&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-doctag&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-title&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-section&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-type&lt;/span>,
  &lt;span class="hljs-selector-class">.hljs-selector-id&lt;/span> {
    &lt;span class="hljs-attribute">font-weight&lt;/span>: bold;
  }</code>
</div>

<small class="shcb-language" id="shcb-language-77"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">CSS</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">css</span><span class="shcb-language__paren">)</span></small></pre>

## Ajoutez le code CSS √† votre site AMP

Une fois le code CSS trouv√©, il faut l&rsquo;ajouter √† toutes vos page AMP. Pour cela, rendez-vous sur les param√®tres de votre extension AMP. (Si vous avez une autre extension, trouvez l&rsquo;endroit o√π ajouter du code CSS personnalis√©).

Depuis votre interface d&rsquo;administration WordPress : 

  1. Acc√©dez √† vos extensions et cliquez sur ¬´¬†Settings¬†¬ª.
  2. Cliquez sur ¬´¬†Design¬†¬ª puis ¬´¬†Global¬†¬ª.
  3. Dans ¬´¬†Custom CSS¬†¬ª, ajoutez votre code CSS pr√©c√©demment copi√©.

## Utilisation 

Tous vos codes sont maintenant, normalement, de la bonne couleur :). 

Si ce n&rsquo;est pas le cas, il se peut que vous utilisiez un plugin de cache, n&rsquo;affichant ainsi pas ces nouvelles modifications. Videz le cache et regardez si cela a fonctionn√© ! 

Si vos couleurs ne s&rsquo;affichent pas o√π il faut pour certains blocs de code, il faudra s√©lectionner manuellement le bon langage de programmation associ√©. Pour cela, rendez-vous sur votre article. Cliquez sur le bloc de code posant probl√®me.

<div class="wp-block-image">
  <figure class="aligncenter size-large is-resized"><img loading="lazy" src="https://keskec.fr/wp-content/uploads/2020/05/image-2-533x1024.png" alt="" class="wp-image-2204" width="257" height="494" srcset="https://keskec.fr/wp-content/uploads/2020/05/image-2-533x1024.png 533w, https://keskec.fr/wp-content/uploads/2020/05/image-2-156x300.png 156w, https://keskec.fr/wp-content/uploads/2020/05/image-2.png 599w" sizes="(max-width: 257px) 100vw, 257px" /><figcaption>Bloc code</figcaption></figure>
</div>

S√©lectionnez le langage ad√©quat ! 

## Sources : 

  * <https://developers.google.com/amp?hl=fr>
  * [https://fr.wikipedia.org/wiki/Accelerated\_Mobile\_Pages][3]
  * <https://github.com/highlightjs/highlight.js>

 [1]: https://wordpress.org/plugins/accelerated-mobile-pages/
 [2]: https://wordpress.com/fr/support/extensions/
 [3]: https://fr.wikipedia.org/wiki/Accelerated_Mobile_Pages