---
title: 'Autoriser l&rsquo;upload de fichiers non-autorisés sur WordPress'
author: Robin Pourtaud
type: post
date: 2020-06-03T21:21:30+00:00
url: /sciences/informatique/robin/2692/
featured_image: /wp-content/uploads/2020/06/erreur-1568x384.png
itemlist_item_1877:
  - 'a:0:{}'
music_composer_1877:
  - 'a:0:{}'
movie_actor_1877:
  - 'a:0:{}'
article_items_1877:
  - 'a:0:{}'
image_object_exif_data_1877:
  - 'a:0:{}'
blogposting_items_1877:
  - 'a:0:{}'
newsarticle_items_1877:
  - 'a:0:{}'
tech_article_items_1877:
  - 'a:0:{}'
product_reviews_1877:
  - 'a:0:{}'
feed_element_1877:
  - 'a:0:{}'
faq_question_1877:
  - 'a:0:{}'
performer_1877:
  - 'a:0:{}'
organizer_1877:
  - 'a:0:{}'
accepted_answer_1877:
  - 'a:0:{}'
suggested_answer_1877:
  - 'a:0:{}'
howto_supply_1877:
  - 'a:0:{}'
howto_tool_1877:
  - 'a:0:{}'
howto_step_1877:
  - 'a:0:{}'
announcement_location_1877:
  - 'a:0:{}'
music_playlist_track_1877:
  - 'a:0:{}'
music_album_track_1877:
  - 'a:0:{}'
apartment_amenities_1877:
  - 'a:0:{}'
additional_property_1877:
  - 'a:0:{}'
mc_cause_1877:
  - 'a:0:{}'
mc_symptom_1877:
  - 'a:0:{}'
mc_risk_factor_1877:
  - 'a:0:{}'
tvseries_actor_1877:
  - 'a:0:{}'
tvseries_season_1877:
  - 'a:0:{}'
trip_itinerary_1877:
  - 'a:0:{}'
itemlist_item_1494:
  - 'a:0:{}'
music_composer_1494:
  - 'a:0:{}'
movie_actor_1494:
  - 'a:0:{}'
article_items_1494:
  - 'a:0:{}'
image_object_exif_data_1494:
  - 'a:0:{}'
blogposting_items_1494:
  - 'a:0:{}'
newsarticle_items_1494:
  - 'a:0:{}'
tech_article_items_1494:
  - 'a:0:{}'
product_reviews_1494:
  - 'a:0:{}'
feed_element_1494:
  - 'a:0:{}'
faq_question_1494:
  - 'a:0:{}'
performer_1494:
  - 'a:0:{}'
organizer_1494:
  - 'a:0:{}'
accepted_answer_1494:
  - 'a:0:{}'
suggested_answer_1494:
  - 'a:0:{}'
howto_supply_1494:
  - 'a:0:{}'
howto_tool_1494:
  - 'a:0:{}'
howto_step_1494:
  - 'a:0:{}'
announcement_location_1494:
  - 'a:0:{}'
music_playlist_track_1494:
  - 'a:0:{}'
music_album_track_1494:
  - 'a:0:{}'
apartment_amenities_1494:
  - 'a:0:{}'
additional_property_1494:
  - 'a:0:{}'
mc_cause_1494:
  - 'a:0:{}'
mc_symptom_1494:
  - 'a:0:{}'
mc_risk_factor_1494:
  - 'a:0:{}'
tvseries_actor_1494:
  - 'a:0:{}'
tvseries_season_1494:
  - 'a:0:{}'
trip_itinerary_1494:
  - 'a:0:{}'
itemlist_item_1493:
  - 'a:0:{}'
music_composer_1493:
  - 'a:0:{}'
movie_actor_1493:
  - 'a:0:{}'
article_items_1493:
  - 'a:0:{}'
image_object_exif_data_1493:
  - 'a:0:{}'
blogposting_items_1493:
  - 'a:0:{}'
newsarticle_items_1493:
  - 'a:0:{}'
tech_article_items_1493:
  - 'a:0:{}'
product_reviews_1493:
  - 'a:0:{}'
feed_element_1493:
  - 'a:0:{}'
faq_question_1493:
  - 'a:0:{}'
performer_1493:
  - 'a:0:{}'
organizer_1493:
  - 'a:0:{}'
accepted_answer_1493:
  - 'a:0:{}'
suggested_answer_1493:
  - 'a:0:{}'
howto_supply_1493:
  - 'a:0:{}'
howto_tool_1493:
  - 'a:0:{}'
howto_step_1493:
  - 'a:0:{}'
announcement_location_1493:
  - 'a:0:{}'
music_playlist_track_1493:
  - 'a:0:{}'
music_album_track_1493:
  - 'a:0:{}'
apartment_amenities_1493:
  - 'a:0:{}'
additional_property_1493:
  - 'a:0:{}'
mc_cause_1493:
  - 'a:0:{}'
mc_symptom_1493:
  - 'a:0:{}'
mc_risk_factor_1493:
  - 'a:0:{}'
tvseries_actor_1493:
  - 'a:0:{}'
tvseries_season_1493:
  - 'a:0:{}'
trip_itinerary_1493:
  - 'a:0:{}'
rank_math_internal_links_processed:
  - "1"
ampforwp-amp-on-off:
  - default
rank_math_seo_score:
  - "85"
rank_math_primary_category:
  - "8"
rank_math_focus_keyword:
  - upload
rank_math_rich_snippet:
  - article
ads-for-wp-visibility:
  - show
rank_math_schema_Article:
  - 'a:6:{s:5:"@type";s:7:"Article";s:8:"headline";s:11:"%seo_title%";s:13:"datePublished";s:20:"%date(Y-m-dTH:i:sP)%";s:12:"dateModified";s:24:"%modified(Y-m-dTH:i:sP)%";s:6:"author";a:2:{s:5:"@type";s:6:"Person";s:4:"name";s:14:"Robin Pourtaud";}s:8:"metadata";a:3:{s:5:"title";s:7:"Article";s:9:"isPrimary";b:1;s:4:"type";s:8:"template";}}'
rank_math_analytic_object_id:
  - "58"
categories:
  - Informatique
tags:
  - Tutoriel
  - Wordpress
  - Zip

---
« Désolé, ce type de fichier n’est pas autorisé pour des raisons de sécurité. ».  
J&rsquo;ai repoussé à de nombreuses reprises sa résolution pensant que c&rsquo;était une opération complexe. Finalement, en moins de 5 min, c&rsquo;était résolu et c&rsquo;est ce que je vais vous montrer dès maintenant ! 

Je traiterai l&rsquo;upload de fichiers zip en particulier. 

## Résolution manuelle : 

### Accéder au fichier function.php : 

Le fichier « function.php » est censé se situer dans le dossier du thème de votre site web. Accedez-y via SFTP, SSH ou de la façon de votre choix. 

### Modifier function.php

Pour comprendre la fonction ci-dessous, il faut savoir ce qu&rsquo;est un type Mime : 

Un type de média, ou type MIME est un identifiant de format de données composé de 2 parties, appelées type, et sous-types. 

Dans notre cas, notre type MIME est « application/zip », mais il en existe pleins d&rsquo;autres : 

  * **application/pdf** pour le format pdf
  * **application/msword** pour le format .doc de Microsoft Word
  * **image/gif** pour les images GIF
  * **text/css** pour le CSS

Pour en voir plus : 

<p class="has-text-align-center">
  <a href="https://fr.wikipedia.org/wiki/Type_de_m%C3%A9dias" class="rank-math-link">Type Mimes &#8211; Wikipédia</a>
</p>

Pour ajouter les fichiers « zip », ajoutez-y ces lignes entre les balises php.

<pre class="wp-block-code" aria-describedby="shcb-language-84" data-shcb-language-name="PHP" data-shcb-language-slug="php"><div>
  <code class="hljs language-php">&lt;span class="hljs-function">&lt;span class="hljs-keyword">function&lt;/span> &lt;span class="hljs-title">zip_up&lt;/span>&lt;span class="hljs-params">($mimes=array&lt;span class="hljs-params">()&lt;/span>)&lt;/span> &lt;/span>{ 
     $mimes[&lt;span class="hljs-string">'zip'&lt;/span>] = &lt;span class="hljs-string">'application/zip'&lt;/span>;
     &lt;span class="hljs-keyword">return&lt;/span> $mimes;
  }
  add_filter(&lt;span class="hljs-string">'upload_mimes'&lt;/span>, &lt;span class="hljs-string">'zip_up'&lt;/span>);</code>
</div>

<small class="shcb-language" id="shcb-language-84"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">PHP</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">php</span><span class="shcb-language__paren">)</span></small></pre>

N&rsquo;oubliez pas d&rsquo;enregistrer ! 

_Nb : Vous pouvez bien sûr ajouter autant d&rsquo;extensions que vous souhaitez&#8230;_

### Optionnel : désactiver totalement le filtrage 

Pour autoriser l&rsquo;upload de n&rsquo;importe quel fichier, il suffit d&rsquo;ajouter la ligne suivante au fichier wp-config.php à la racine de votre site web. 

<pre class="wp-block-code" aria-describedby="shcb-language-85" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div>
  <code class="hljs language-javascript">define(&lt;span class="hljs-string">'ALLOW_UNFILTERED_UPLOADS'&lt;/span>, &lt;span class="hljs-literal">true&lt;/span>);</code>
</div>

<small class="shcb-language" id="shcb-language-85"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>

## Alternative : Utiliser une extension

J&rsquo;utilise personnellement l&rsquo;extension : 

<p class="has-text-align-center">
  <a href="https://fr.wordpress.org/plugins/wp-add-mime-types/" class="rank-math-link">WP add Mimes Types</a> par &nbsp;<a href="http://kitaney-wordpress.blogspot.jp/" class="rank-math-link">Kimiya Kitani</a>
</p>

Une fois installée, vous la trouverez sous « Réglage » puis « Mime types settings ».

Vous y trouverez également une liste d&rsquo;extension autorisé sous « List of allowed mime types and file extensions by WordPress ».<figure class="wp-block-image size-large">

<img loading="lazy" width="1024" height="519" src="https://keskec.fr/wp-content/uploads/2020/06/image-3-1024x519.png" alt="" class="wp-image-2720" srcset="https://keskec.fr/wp-content/uploads/2020/06/image-3-1024x519.png 1024w, https://keskec.fr/wp-content/uploads/2020/06/image-3-300x152.png 300w, https://keskec.fr/wp-content/uploads/2020/06/image-3-768x389.png 768w, https://keskec.fr/wp-content/uploads/2020/06/image-3-1536x778.png 1536w, https://keskec.fr/wp-content/uploads/2020/06/image-3.png 1550w" sizes="(max-width: 1024px) 100vw, 1024px" /> <figcaption>Add Values &#8211; WP add Mimes Types</figcaption></figure> 

Ajoutez-y cette ligne et enregistrez :). 

Plus d&rsquo;articles sur WordPress ? [Bonne lecture][1]{.rank-math-link}

 [1]: https://keskec.fr/tag/wordpress/