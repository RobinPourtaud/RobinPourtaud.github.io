---
title: 1 site web, 2 domaines dont 1 référencé (avec robots.txt et .htaccess)
author: Robin Pourtaud
type: post
date: 2020-06-14T09:00:00+00:00
url: /sciences/informatique/robin/2949/
featured_image: /wp-content/uploads/2020/06/Dessin-sans-titre.png
rank_math_seo_score:
  - "66"
ads-for-wp-visibility:
  - show
itemlist_item_2757:
  - 'a:0:{}'
music_composer_2757:
  - 'a:0:{}'
movie_actor_2757:
  - 'a:0:{}'
article_items_2757:
  - 'a:0:{}'
image_object_exif_data_2757:
  - 'a:0:{}'
blogposting_items_2757:
  - 'a:0:{}'
newsarticle_items_2757:
  - 'a:0:{}'
tech_article_items_2757:
  - 'a:0:{}'
product_reviews_2757:
  - 'a:0:{}'
feed_element_2757:
  - 'a:0:{}'
faq_question_2757:
  - 'a:0:{}'
performer_2757:
  - 'a:0:{}'
organizer_2757:
  - 'a:0:{}'
accepted_answer_2757:
  - 'a:0:{}'
suggested_answer_2757:
  - 'a:0:{}'
howto_supply_2757:
  - 'a:0:{}'
howto_tool_2757:
  - 'a:0:{}'
howto_step_2757:
  - 'a:0:{}'
announcement_location_2757:
  - 'a:0:{}'
music_playlist_track_2757:
  - 'a:0:{}'
music_album_track_2757:
  - 'a:0:{}'
apartment_amenities_2757:
  - 'a:0:{}'
additional_property_2757:
  - 'a:0:{}'
mc_cause_2757:
  - 'a:0:{}'
mc_symptom_2757:
  - 'a:0:{}'
mc_risk_factor_2757:
  - 'a:0:{}'
tvseries_actor_2757:
  - 'a:0:{}'
tvseries_season_2757:
  - 'a:0:{}'
trip_itinerary_2757:
  - 'a:0:{}'
itemlist_item_1877:
  - 'a:0:{}'
music_composer_1877:
  - 'a:0:{}'
movie_actor_1877:
  - 'a:0:{}'
article_items_1877:
  - 'a:0:{}'
image_object_exif_data_1877:
  - 'a:0:{}'
blogposting_items_1877:
  - 'a:0:{}'
newsarticle_items_1877:
  - 'a:0:{}'
tech_article_items_1877:
  - 'a:0:{}'
product_reviews_1877:
  - 'a:0:{}'
feed_element_1877:
  - 'a:0:{}'
faq_question_1877:
  - 'a:0:{}'
performer_1877:
  - 'a:0:{}'
organizer_1877:
  - 'a:0:{}'
accepted_answer_1877:
  - 'a:0:{}'
suggested_answer_1877:
  - 'a:0:{}'
howto_supply_1877:
  - 'a:0:{}'
howto_tool_1877:
  - 'a:0:{}'
howto_step_1877:
  - 'a:0:{}'
announcement_location_1877:
  - 'a:0:{}'
music_playlist_track_1877:
  - 'a:0:{}'
music_album_track_1877:
  - 'a:0:{}'
apartment_amenities_1877:
  - 'a:0:{}'
additional_property_1877:
  - 'a:0:{}'
mc_cause_1877:
  - 'a:0:{}'
mc_symptom_1877:
  - 'a:0:{}'
mc_risk_factor_1877:
  - 'a:0:{}'
tvseries_actor_1877:
  - 'a:0:{}'
tvseries_season_1877:
  - 'a:0:{}'
trip_itinerary_1877:
  - 'a:0:{}'
itemlist_item_1494:
  - 'a:0:{}'
music_composer_1494:
  - 'a:0:{}'
movie_actor_1494:
  - 'a:0:{}'
article_items_1494:
  - 'a:0:{}'
image_object_exif_data_1494:
  - 'a:0:{}'
blogposting_items_1494:
  - 'a:0:{}'
newsarticle_items_1494:
  - 'a:0:{}'
tech_article_items_1494:
  - 'a:0:{}'
product_reviews_1494:
  - 'a:0:{}'
feed_element_1494:
  - 'a:0:{}'
faq_question_1494:
  - 'a:0:{}'
performer_1494:
  - 'a:0:{}'
organizer_1494:
  - 'a:0:{}'
accepted_answer_1494:
  - 'a:0:{}'
suggested_answer_1494:
  - 'a:0:{}'
howto_supply_1494:
  - 'a:0:{}'
howto_tool_1494:
  - 'a:0:{}'
howto_step_1494:
  - 'a:0:{}'
announcement_location_1494:
  - 'a:0:{}'
music_playlist_track_1494:
  - 'a:0:{}'
music_album_track_1494:
  - 'a:0:{}'
apartment_amenities_1494:
  - 'a:0:{}'
additional_property_1494:
  - 'a:0:{}'
mc_cause_1494:
  - 'a:0:{}'
mc_symptom_1494:
  - 'a:0:{}'
mc_risk_factor_1494:
  - 'a:0:{}'
tvseries_actor_1494:
  - 'a:0:{}'
tvseries_season_1494:
  - 'a:0:{}'
trip_itinerary_1494:
  - 'a:0:{}'
itemlist_item_1493:
  - 'a:0:{}'
music_composer_1493:
  - 'a:0:{}'
movie_actor_1493:
  - 'a:0:{}'
article_items_1493:
  - 'a:0:{}'
image_object_exif_data_1493:
  - 'a:0:{}'
blogposting_items_1493:
  - 'a:0:{}'
newsarticle_items_1493:
  - 'a:0:{}'
tech_article_items_1493:
  - 'a:0:{}'
product_reviews_1493:
  - 'a:0:{}'
feed_element_1493:
  - 'a:0:{}'
faq_question_1493:
  - 'a:0:{}'
performer_1493:
  - 'a:0:{}'
organizer_1493:
  - 'a:0:{}'
accepted_answer_1493:
  - 'a:0:{}'
suggested_answer_1493:
  - 'a:0:{}'
howto_supply_1493:
  - 'a:0:{}'
howto_tool_1493:
  - 'a:0:{}'
howto_step_1493:
  - 'a:0:{}'
announcement_location_1493:
  - 'a:0:{}'
music_playlist_track_1493:
  - 'a:0:{}'
music_album_track_1493:
  - 'a:0:{}'
apartment_amenities_1493:
  - 'a:0:{}'
additional_property_1493:
  - 'a:0:{}'
mc_cause_1493:
  - 'a:0:{}'
mc_symptom_1493:
  - 'a:0:{}'
mc_risk_factor_1493:
  - 'a:0:{}'
tvseries_actor_1493:
  - 'a:0:{}'
tvseries_season_1493:
  - 'a:0:{}'
trip_itinerary_1493:
  - 'a:0:{}'
rank_math_internal_links_processed:
  - "1"
ampforwp-amp-on-off:
  - default
rank_math_primary_category:
  - "8"
rank_math_focus_keyword:
  - robots.txt
rank_math_analytic_object_id:
  - "54"
categories:
  - Informatique
tags:
  - Apache2
  - htaccess
  - Robots.txt
  - Tutoriel
  - Wordpress

---
Au cours de la création de notre site « _keskec.fr_« , nous avons souhaité créer un sous-domaine afin de faciliter notre gestion du site web. Ce sous-domaine utilisait les mêmes fichiers que notre site web principal, mais ne devait pas être référencé sur les moteurs de recherches ! Nous avons vite rencontré un problème en raison de l&rsquo;unicité du fichier robots.txt. Ce tutoriel a pour but de vous montrer sa résolution.

Nb : Ce tutoriel nécessite un fichier .htaccess, il sera donc à destination des utilisateurs de Apache2 et non de Nginx. 

## Modification et création de robots.txt

Un fichier robots.txt est un fichier utilisé par de nombreux moteurs de recherche afin d&rsquo;indiquer si un site (ou une page / un document) doit être référencé ou non.

Pour ce tutoriel, prenons 2 site web : « _site.com_ » et « _no-ref.site.com_« . Comme leurs noms le suggèrent, on souhaite que le site « _site.com_ » soit le seul à être référencé sur [Google, Bing, etc.][1]{.rank-math-link}

Par défaut, sans robots.txt, le moteur de recherche référencera votre site web s&rsquo;il est accessible et respecte ses standards. C&rsquo;est pourquoi, nous ne créerons pas de robots.txt pour « _site.com_« .

A la racine de votre site, créez un fichier .txt avec le nom de votre choix, pour ma part : _robots2.txt_.

<pre class="wp-block-code" aria-describedby="shcb-language-88" data-shcb-language-name="Bash" data-shcb-language-slug="bash"><div>
  <code class="hljs language-bash">User-agent: *
  Disallow: / </code>
</div>

<small class="shcb-language" id="shcb-language-88"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">Bash</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">bash</span><span class="shcb-language__paren">)</span></small></pre>

<p class="has-text-align-center">
  <a href="http://robots-txt.com/ressources/robots-txt-disallow-all/" class="rank-math-link">Pour en savoir plus</a>
</p>

_robots2.txt_ ne sera pas traité par les moteurs de recherche, ils analysent uniquement les fichiers _robots.txt_.  
Il sera alors nécessaire, pour le domaine « _no-ref.site.com_ » uniquement, de faire passer le fichier _robots2.txt_ comme un fichier _robots.txt_. C&rsquo;est là qu&rsquo;entre en jeu le fichier _.htaccess_.

## Configuration du .htaccess

Un fichier _.htaccess_ est un fichier de configuration Apache2. Il permet de paramétrer le serveur HTTP depuis un dossier spécifique. Nous allons nous en servir pour permettre aux moteurs de recherche d&rsquo;accéder au contenu de robots2.txt depuis no-ref.site.com/robots.txt. Pour cela : 

<pre class="wp-block-code" aria-describedby="shcb-language-89" data-shcb-language-name="Apache" data-shcb-language-slug="apache"><div>
  <code class="hljs language-apache">&lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteEngine&lt;/span>&lt;/span> &lt;span class="hljs-literal">on&lt;/span>
  &lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteCond&lt;/span>&lt;/span> &lt;span class="hljs-variable">%{HTTP_HOST}&lt;/span> ^no-ref\.site\.com$
  &lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteRule&lt;/span>&lt;/span> ^robots\.txt$ robots2.txt&lt;span class="hljs-meta"> [L]&lt;/span></code>
</div>

<small class="shcb-language" id="shcb-language-89"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">Apache</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">apache</span><span class="shcb-language__paren">)</span></small></pre>

Littéralement, une requête à destination de no-ref.site.com/robots.txt renverra le contenu de robots2.txt.

Les moteurs de recherches (principaux) ne référenceront donc pas votre deuxième domaine !

 [1]: http://robots-txt.com/ressources/