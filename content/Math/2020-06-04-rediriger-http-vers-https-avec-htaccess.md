---
title: Rediriger le trafic HTTP vers HTTPS avec .htaccess.
author: Robin Pourtaud
type: post
date: 2020-06-04T19:08:12+00:00
url: /sciences/informatique/robin/2729/
featured_image: /wp-content/uploads/2020/06/https-1568x667.png
rank_math_seo_score:
  - "67"
ads-for-wp-visibility:
  - show
itemlist_item_1877:
  - 'a:0:{}'
music_composer_1877:
  - 'a:0:{}'
movie_actor_1877:
  - 'a:0:{}'
article_items_1877:
  - 'a:0:{}'
image_object_exif_data_1877:
  - 'a:0:{}'
blogposting_items_1877:
  - 'a:0:{}'
newsarticle_items_1877:
  - 'a:0:{}'
tech_article_items_1877:
  - 'a:0:{}'
product_reviews_1877:
  - 'a:0:{}'
feed_element_1877:
  - 'a:0:{}'
faq_question_1877:
  - 'a:0:{}'
performer_1877:
  - 'a:0:{}'
organizer_1877:
  - 'a:0:{}'
accepted_answer_1877:
  - 'a:0:{}'
suggested_answer_1877:
  - 'a:0:{}'
howto_supply_1877:
  - 'a:0:{}'
howto_tool_1877:
  - 'a:0:{}'
howto_step_1877:
  - 'a:0:{}'
announcement_location_1877:
  - 'a:0:{}'
music_playlist_track_1877:
  - 'a:0:{}'
music_album_track_1877:
  - 'a:0:{}'
apartment_amenities_1877:
  - 'a:0:{}'
additional_property_1877:
  - 'a:0:{}'
mc_cause_1877:
  - 'a:0:{}'
mc_symptom_1877:
  - 'a:0:{}'
mc_risk_factor_1877:
  - 'a:0:{}'
tvseries_actor_1877:
  - 'a:0:{}'
tvseries_season_1877:
  - 'a:0:{}'
trip_itinerary_1877:
  - 'a:0:{}'
itemlist_item_1494:
  - 'a:0:{}'
music_composer_1494:
  - 'a:0:{}'
movie_actor_1494:
  - 'a:0:{}'
article_items_1494:
  - 'a:0:{}'
image_object_exif_data_1494:
  - 'a:0:{}'
blogposting_items_1494:
  - 'a:0:{}'
newsarticle_items_1494:
  - 'a:0:{}'
tech_article_items_1494:
  - 'a:0:{}'
product_reviews_1494:
  - 'a:0:{}'
feed_element_1494:
  - 'a:0:{}'
faq_question_1494:
  - 'a:0:{}'
performer_1494:
  - 'a:0:{}'
organizer_1494:
  - 'a:0:{}'
accepted_answer_1494:
  - 'a:0:{}'
suggested_answer_1494:
  - 'a:0:{}'
howto_supply_1494:
  - 'a:0:{}'
howto_tool_1494:
  - 'a:0:{}'
howto_step_1494:
  - 'a:0:{}'
announcement_location_1494:
  - 'a:0:{}'
music_playlist_track_1494:
  - 'a:0:{}'
music_album_track_1494:
  - 'a:0:{}'
apartment_amenities_1494:
  - 'a:0:{}'
additional_property_1494:
  - 'a:0:{}'
mc_cause_1494:
  - 'a:0:{}'
mc_symptom_1494:
  - 'a:0:{}'
mc_risk_factor_1494:
  - 'a:0:{}'
tvseries_actor_1494:
  - 'a:0:{}'
tvseries_season_1494:
  - 'a:0:{}'
trip_itinerary_1494:
  - 'a:0:{}'
itemlist_item_1493:
  - 'a:0:{}'
music_composer_1493:
  - 'a:0:{}'
movie_actor_1493:
  - 'a:0:{}'
article_items_1493:
  - 'a:0:{}'
image_object_exif_data_1493:
  - 'a:0:{}'
blogposting_items_1493:
  - 'a:0:{}'
newsarticle_items_1493:
  - 'a:0:{}'
tech_article_items_1493:
  - 'a:0:{}'
product_reviews_1493:
  - 'a:0:{}'
feed_element_1493:
  - 'a:0:{}'
faq_question_1493:
  - 'a:0:{}'
performer_1493:
  - 'a:0:{}'
organizer_1493:
  - 'a:0:{}'
accepted_answer_1493:
  - 'a:0:{}'
suggested_answer_1493:
  - 'a:0:{}'
howto_supply_1493:
  - 'a:0:{}'
howto_tool_1493:
  - 'a:0:{}'
howto_step_1493:
  - 'a:0:{}'
announcement_location_1493:
  - 'a:0:{}'
music_playlist_track_1493:
  - 'a:0:{}'
music_album_track_1493:
  - 'a:0:{}'
apartment_amenities_1493:
  - 'a:0:{}'
additional_property_1493:
  - 'a:0:{}'
mc_cause_1493:
  - 'a:0:{}'
mc_symptom_1493:
  - 'a:0:{}'
mc_risk_factor_1493:
  - 'a:0:{}'
tvseries_actor_1493:
  - 'a:0:{}'
tvseries_season_1493:
  - 'a:0:{}'
trip_itinerary_1493:
  - 'a:0:{}'
rank_math_internal_links_processed:
  - "1"
ampforwp-amp-on-off:
  - default
itemlist_item_2757:
  - 'a:0:{}'
music_composer_2757:
  - 'a:0:{}'
movie_actor_2757:
  - 'a:0:{}'
article_items_2757:
  - 'a:0:{}'
image_object_exif_data_2757:
  - 'a:0:{}'
blogposting_items_2757:
  - 'a:0:{}'
newsarticle_items_2757:
  - 'a:0:{}'
tech_article_items_2757:
  - 'a:0:{}'
product_reviews_2757:
  - 'a:0:{}'
feed_element_2757:
  - 'a:0:{}'
faq_question_2757:
  - 'a:0:{}'
performer_2757:
  - 'a:0:{}'
organizer_2757:
  - 'a:0:{}'
accepted_answer_2757:
  - 'a:0:{}'
suggested_answer_2757:
  - 'a:0:{}'
howto_supply_2757:
  - 'a:0:{}'
howto_tool_2757:
  - 'a:0:{}'
howto_step_2757:
  - 'a:0:{}'
announcement_location_2757:
  - 'a:0:{}'
music_playlist_track_2757:
  - 'a:0:{}'
music_album_track_2757:
  - 'a:0:{}'
apartment_amenities_2757:
  - 'a:0:{}'
additional_property_2757:
  - 'a:0:{}'
mc_cause_2757:
  - 'a:0:{}'
mc_symptom_2757:
  - 'a:0:{}'
mc_risk_factor_2757:
  - 'a:0:{}'
tvseries_actor_2757:
  - 'a:0:{}'
tvseries_season_2757:
  - 'a:0:{}'
trip_itinerary_2757:
  - 'a:0:{}'
rank_math_focus_keyword:
  - https
rank_math_primary_category:
  - "8"
rank_math_analytic_object_id:
  - "57"
categories:
  - Informatique
tags:
  - Apache2
  - htaccess
  - Tutoriel
  - Wordpress

---
.htaccess est un fichier de configuration utilisé par Apache2 permettant de paramétrer le comportement du serveur HTTP dans un dossier précis. Ainsi, sans toucher aux fichiers de configuration du serveur HTTP directement, on pourra facilement réécrire l&rsquo;URL afin de permettre la redirection du trafic HTTP vers HTTPS. 

_Ce tutoriel **n&rsquo;est donc pas** à destination des utilisateurs de serveur Nginx._ 

## Accéder au fichier 

### Manuellement 

Un fichier .htaccess peut se situer dans n&rsquo;importe quel dossier de votre site web. Si vous souhaitez appliquer la redirection à tout le site, je vous conseille donc de modifier celui positionné à la **racine de votre site.** 

Vous pouvez bien-sûr le faire via FTP/SSH manuellement. 

_Attention ! Si vous ne le trouvez pas, il est possible que **le fichier soit caché** ! Un fichier commençant par un point sous linux est un fichier caché._ 

S&rsquo;il n&rsquo;existe pas, créez-le ! 

### Sur WordPress : Via une extension 

Certaines extensions permettent la modification de .htaccess directement depuis l&rsquo;interface d&rsquo;administration de votre wordpress. Par exemple : Rank Math SEO le permet dans « Réglages généraux » -> « Modifier le .htaccess ».

## Modifier le fichier 

Je vous propose d&rsquo;ajouter ces lignes de codes dans votre fichier .htaccess : 

<pre class="wp-block-code" aria-describedby="shcb-language-86" data-shcb-language-name="Apache" data-shcb-language-slug="apache"><div>
  <code class="hljs language-apache shcb-code-table shcb-line-numbers">&lt;span class='shcb-loc'>&lt;span>&lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteEngine&lt;/span>&lt;/span> &lt;span class="hljs-literal">On&lt;/span>
  &lt;/span>&lt;/span>&lt;span class='shcb-loc'>&lt;span>&lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteCond&lt;/span>&lt;/span> &lt;span class="hljs-variable">%{HTTPS}&lt;/span> &lt;span class="hljs-literal">off&lt;/span>
  &lt;/span>&lt;/span>&lt;span class='shcb-loc'>&lt;span>&lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteRule&lt;/span>&lt;/span> (.*) https://&lt;span class="hljs-variable">%{HTTP_HOST}&lt;/span>&lt;span class="hljs-variable">%{REQUEST_URI}&lt;/span>&lt;span class="hljs-meta"> [R=301,L]&lt;/span>
  &lt;/span>&lt;/span></code>
</div>

<small class="shcb-language" id="shcb-language-86"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">Apache</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">apache</span><span class="shcb-language__paren">)</span></small></pre>

Pour paraphraser ce code :  
La ligne 1 : permet d&rsquo;activer la réécriture d&rsquo;URL ([En savoir plus][1]{.rank-math-link}).  
La ligne 2 : si la requête ne se sert pas de HTTPS alors :  
La ligne 3 : pour n&rsquo;importe quelle requête (le regex de début), on redirige de façon permanente ([R=301][2]{.rank-math-link}) l&rsquo;URL vers une URL utilisant le protocole HTTPS. « L » est un drapeau permettant de stopper le processus de réécriture.

Pour plus de redirections, veuillez vous référer à [un article de Mozilla][3]{.rank-math-link}.

Une alternative à « RewriteCond %{HTTPS} off » est : 

<pre class="wp-block-code" aria-describedby="shcb-language-87" data-shcb-language-name="Apache" data-shcb-language-slug="apache"><div>
  <code class="hljs language-apache">&lt;span class="hljs-attribute">&lt;span class="hljs-nomarkup">RewriteCond&lt;/span>&lt;/span> &lt;span class="hljs-variable">%{SERVER_PORT}&lt;/span> 80</code>
</div>

<small class="shcb-language" id="shcb-language-87"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">Apache</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">apache</span><span class="shcb-language__paren">)</span></small></pre>

Le port de HTTP étant par défaut le 80, celui du HTTPS le 443.

## Sources : 

  1. [RedirectSSL Apache2][4]{.rank-math-link}
  2. [HTTP to HTTPS redirect not working with .htaccess &#8211; Stack Overflow][5]{.rank-math-link} 
  3. [Multiple RewriteConditions: How to chain them before a set of rules? &#8211; Stack Overflow][6]{.rank-math-link}
  4. [.htaccess &#8211; Wikipédia][7]{.rank-math-link}

 [1]: https://httpd.apache.org/docs/2.4/fr/mod/mod_rewrite.html
 [2]: https://httpd.apache.org/docs/2.4/fr/rewrite/flags.html
 [3]: https://developer.mozilla.org/fr/docs/Web/HTTP/Redirections
 [4]: https://cwiki.apache.org/confluence/display/HTTPD/RedirectSSL
 [5]: https://stackoverflow.com/questions/51352344/http-to-https-redirect-not-working-with-htaccess
 [6]: https://stackoverflow.com/questions/5305987/multiple-rewriteconditions-how-to-chain-them-before-a-set-of-rules
 [7]: https://fr.wikipedia.org/wiki/.htaccess